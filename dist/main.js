var Client=function(t){var e={};function n(o){if(e[o])return e[o].exports;var a=e[o]={i:o,l:!1,exports:{}};return t[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(o,a,function(e){return t[e]}.bind(null,a));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";function o(t){t.preventDefault(),a().then((function(t){}))}n.r(e),n.d(e,"performAction",(function(){return o})),n.d(e,"postData",(function(){return i})),n.d(e,"getWeather",(function(){return l})),n.d(e,"getPic",(function(){return s})),n.d(e,"checkValid",(function(){return u})),document.getElementById("pdf").addEventListener("click",(function(){var t=document.getElementById("container");html2pdf(t)}));const a=async()=>{let t=document.getElementById("city").value,e=document.getElementById("date").value,n=document.getElementById("Edate").value;const o=await fetch("http://localhost:3000/username");try{const i=await o.json(),l=i.wKey,s=i.pKey;i.userName;let u="http://api.geonames.org/searchJSON?q="+t+"&maxRows=1&username=mzoon94";const d=await fetch(u);try{const o=await d.json(),i=o.geonames[0].countryName,u=o.geonames[0].lat,m=o.geonames[0].lng;await Client.postData("http://localhost:3000/wData",{city:t,countryName:i,pic:await Client.getPic(t,i,s),temp:await Client.getWeather(u,m,l,e),countDay:await r(e,n)}).then(await(a=500,new Promise(t=>setTimeout(t,a))),await c(e))}catch(t){console.log("error",t)}}catch(t){console.log("error",t)}var a};const r=(t,e)=>{const n=new Date(t),o=new Date(e);let a=0;for(;n<o;)a++,n.setDate(n.getDate()+1);return a},c=async t=>{const e=await fetch("http://localhost:3000/all");try{const n=await e.json();let o=n.length-1,a=n[o].city,r=n[o].countryName,c=n[o].cDate,i=n[o].temp,l=n[o].pic;document.getElementById("img").classList.add("imgCity"),document.getElementById("cityC").innerHTML=" My Trip to: "+a+", "+r,document.getElementById("dateD").innerHTML="Departing: "+t+", the trip will last "+c+" days",document.getElementById("temp").innerHTML="Typical weather for then is: "+i,document.getElementById("img").style.backgroundImage="url('"+l+"')"}catch(t){console.log("error",t)}},i=async(t="",e={})=>{console.log(e);const n=await fetch(t,{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});try{return await n.json()}catch(t){console.log("error",t)}},l=async(t,e,n,o)=>{let a="https://api.weatherbit.io/v2.0/forecast/daily?lat="+t+"&lon="+e+"&start_date="+o+"&end_date="+(o+1)+"&key="+n;console.log(a);const r=await fetch(a);try{const t=await r.json(),e=t.data[0].max_temp;return"High "+e+", Low "+t.data[0].min_temp}catch(t){console.log("error",t)}},s=async(t,e,n)=>{let o="https://pixabay.com/api/?key="+n+"&q="+t+"+"+e+"+landscape&image_type=photo";const a=await fetch(o);try{const t=await a.json();if(0==t.total){let t="https://pixabay.com/api/?key="+n+"&q="+e+"+landscape&image_type=photo";const o=await fetch(t),a=await o.json();if(0==a.total)return"Sorry, there is no pic right now";return a.hits[0].largeImageURL}return t.hits[0].largeImageURL}catch(t){console.log("error",t)}};function u(){return""==document.forms.infoForm.city.value?(alert("city must be filled out"),!1):""!=document.forms.infoForm.date.value||(alert("you must choose Depart Date "),!1)}n(0),n(1);var d=n.p+"./Client/view/img/e085e5a88ccc4401a6085fe8646ed9b6-vairpl.png";document.getElementById("picon").src=d}]);